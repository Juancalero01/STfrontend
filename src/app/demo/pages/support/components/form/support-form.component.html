<form class="w-full flex flex-column gap-3 py-2" [formGroup]="supportForm">
  <div class="w-full flex gap-2" *ngIf="showSearch">
    <input
      type="text"
      pInputText
      class="w-full"
      placeholder="Buscar por número de serie..."
      formControlName="search"
      [pKeyFilter]="blockSpace"
      maxlength="10"
    />
    <p-button
      icon="pi pi-search"
      styleClass=" p-button-secondary"
      (onClick)="searchProduct()"
    />
  </div>

  <div class="w-full flex gap-2">
    <div class="w-full">
      <label>FECHA DE REGISTRO</label>
      <input
        type="text"
        pInputText
        class="w-full font-bold bg-gray-100"
        formControlName="dateEntry"
      />
    </div>
    <div class="w-full">
      <label>NÚMERO DE RECLAMO</label>
      <input
        type="text"
        pInputText
        class="w-full font-bold bg-gray-100"
        formControlName="reclaim"
      />
    </div>
    <div class="w-full">
      <label>ESTADO DEL INGRESO</label>
      <p-dropdown
        [options]="supportStatesDropdown"
        optionLabel="name"
        optionValue="id"
        styleClass="w-full font-bold bg-gray-100 uppercase"
        formControlName="state"
        dropdownIcon="none"
      ></p-dropdown>
    </div>
  </div>

  <div class="w-full flex gap-2">
    <div class="w-full">
      <label>TIPO DE PRODUCTO</label>
      <input
        type="text"
        pInputText
        class="w-full font-bold bg-gray-100"
        formControlName="productType"
      />
    </div>
    <div class="w-full">
      <label>CLIENTE</label>
      <input
        type="text"
        pInputText
        class="w-full font-bold bg-gray-100"
        formControlName="client"
      />
    </div>
  </div>

  <div class="w-full flex gap-2">
    <div class="w-full">
      <label>GARANTÍA DE PRODUCCIÓN</label>
      <input
        type="text"
        pInputText
        class="w-full font-bold"
        formControlName="warrantyProduction"
        [ngClass]="{
          'bg-red-100 text-red-600':
            supportForm.get('warrantyProduction')?.value ===
            'GARANTÍA DE PRODUCCIÓN VENCIDA',
          'bg-green-100 text-green-600':
            supportForm.get('warrantyProduction')?.value ===
            'GARANTÍA DE PRODUCCIÓN VÁLIDA'
        }"
      />
    </div>
    <div class="w-full">
      <label>GARANTÍA DE SERVICIO TÉCNICO</label>
      <input
        type="text"
        pInputText
        class="w-full font-bold"
        formControlName="warrantyService"
        [ngClass]="{
          'bg-red-100 text-red-600':
            supportForm.get('warrantyService')?.value ===
            'GARANTÍA DE SERVICIO TÉCNICO VENCIDA',
          'bg-green-100 text-green-600':
            supportForm.get('warrantyService')?.value ===
            'GARANTÍA DE SERVICIO TÉCNICO VÁLIDA'
        }"
      />
    </div>
  </div>
  <div class="w-full flex gap-2">
    <div class="w-full">
      <label>GARANTIA</label>
      <p-dropdown
        [options]="booleanDropdown"
        optionLabel="label"
        optionValue="value"
        placeholder="Seleccionar..."
        styleClass="w-full"
        formControlName="warranty"
      ></p-dropdown>
    </div>
    <div class="w-full">
      <label>TIPO DE PRIORIDAD</label>
      <p-dropdown
        [options]="supportPrioritiesDropdown"
        optionLabel="name"
        optionValue="id"
        placeholder="Seleccionar..."
        styleClass="w-full"
        formControlName="priority"
      ></p-dropdown>
    </div>
  </div>

  <div class="w-full flex gap-2">
    <div class="w-full">
      <label>REMITO DE PRODUCTO ENTRANTE</label>
      <input
        type="text"
        pInputText
        class="w-full"
        formControlName="reference"
      />
    </div>
    <div class="w-full">
      <label>FAJA DE SEGURIDAD</label>
      <p-dropdown
        [options]="booleanDropdown"
        optionLabel="label"
        optionValue="value"
        placeholder="Seleccionar..."
        styleClass="w-full"
        formControlName="securityStrap"
      ></p-dropdown>
    </div>
  </div>

  <div class="w-full">
    <label>FALLA REPORTADA</label>
    <input type="text" pInputText class="w-full" formControlName="failure" />
  </div>

  <div class="w-full">
    <label>TIPO DE FALLA</label>
    <p-dropdown
      [options]="failureTypesDropdown"
      optionLabel="name"
      optionValue="id"
      [filter]="true"
      placeholder="Seleccionar..."
      styleClass="w-full"
      formControlName="failureType"
    >
    </p-dropdown>
  </div>

  <div class="w-full">
    <label>OBSERVACIONES</label>
    <textarea
      pInputTextarea
      maxlength="250"
      class="w-full"
      [autoResize]="true"
      rows="6"
      formControlName="remarks"
    ></textarea>
  </div>

  <div class="flex justify-content-between w-full">
    <div>
      <p-button
        *ngIf="showButtonClean"
        label="LIMPIAR"
        styleClass="p-button-secondary p-button-text"
        (onClick)="cleanForm()"
      />
    </div>
    <div class="flex gap-2">
      <p-button
        *ngIf="showButtonState"
        label="SIGUIENTE ESTADO"
        styleClass="p-button-secondary p-button-text"
      />

      <p-button
        label="CANCELAR"
        styleClass="p-button-secondary p-button-text"
        (onClick)="cancelForm()"
      />
      <p-button
        [label]="buttonLabel"
        [disabled]="supportForm.invalid"
        styleClass="p-button-info p-button-text"
        (onClick)="submitForm()"
      />
    </div>
  </div>
</form>
