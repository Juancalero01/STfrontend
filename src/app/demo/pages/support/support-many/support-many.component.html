<section class="grid">
  <section class="col-12 md:col-12 lg:col-12 xl:col-3">
    <form class="flex flex-wrap gap-2" [formGroup]="supportManyForm">
      <div class="w-full mb-2">
        <span class="font-medium text-2xl"> INGRESOS </span>
      </div>
      <div class="flex flex-column w-full">
        <label>BUSCADOR</label>
        <div class="w-full flex md:flex-row flex-column gap-2">
          <input
            formControlName="search"
            type="text"
            pInputText
            class="w-full"
            maxlength="10"
            minlength="1"
            placeholder="Ingresar número de serie"
          />
          <p-button
            label="BUSCAR"
            styleClass=" p-button-info w-full"
            (onClick)="searchProduct()"
            [disabled]="supportManyForm.get('search')?.invalid"
          />
        </div>
        <small class="p-error"> Campo requerido* </small>
      </div>
      <div class="flex flex-column w-full">
        <label>FECHA DE REGISTRO</label>
        <p-calendar
          formControlName="dateEntry"
          dateFormat="dd-mm-yy"
          styleClass="w-full"
          appendTo="body"
          [showButtonBar]="true"
          [showClear]="true"
          placeholder="Seleccionar fecha de registro del servicio"
        />
        <small class="p-error"> Campo requerido* </small>
      </div>
      <div class="flex flex-column w-full">
        <label>PRIORIDAD</label>
        <p-dropdown
          [options]="priorities"
          formControlName="priority"
          optionLabel="name"
          optionValue="id"
          placeholder="Seleccionar prioridad del servicio"
          styleClass="w-full"
          [showClear]="true"
        />
        <small class="p-error"> Campo requerido* </small>
      </div>
      <div class="flex flex-column w-full">
        <label>REMITO ENTRANTE</label>
        <input
          formControlName="startReference"
          type="text"
          pInputText
          class="w-full"
          placeholder="Ingresar número de remito de producto entrante"
          [maxLength]="255"
        />
        <small class="p-error"> Campo requerido* </small>
      </div>
      <div class="flex flex-column w-full">
        <label>FAJA DE SEGURIDAD</label>
        <p-dropdown
          [options]="booleanDropdown"
          formControlName="securityStrap"
          optionLabel="label"
          optionValue="value"
          styleClass="w-full"
          placeholder="Seleccionar aprobación de faja de seguridad"
          [showClear]="true"
        />
        <small class="p-error"> Campo requerido* </small>
      </div>
      <div class="w-full">
        <p-button
          label="GUARDAR INGRESO"
          styleClass="w-full p-button-success"
          icon="pi pi-save"
          (onClick)="checkData()"
          [disabled]="supportManyForm.invalid"
        />
      </div>
    </form>
  </section>
  <section class="col-12 lg:col-12 xl:col-9 px-4">
    <p-table [value]="supports" styleClass="p-datatable-striped p-datatable-sm">
      <ng-template pTemplate="header">
        <tr class="text-sm h-3rem">
          <th>NÚMERO DE RECLAMO</th>
          <th>NÚMERO DE SERIE</th>
          <th>TIPO DE PRODUCTO</th>
          <th>CLIENTE</th>
          <th class="w-1">ACCIONES</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-support>
        <tr class="text-sm">
          <td>
            <span class="font-semibold">{{ support.reclaim }}</span>
          </td>
          <td>{{ support.product.serial }}</td>
          <td>{{ support.product.productType.name }}</td>
          <td>{{ support.product.client.taxpayerName }}</td>
          <td>
            <p-button
              icon="pi pi-trash"
              styleClass="p-button-text p-button-secondary"
              (click)="deleteItem(support)"
            />
          </td>
        </tr>
      </ng-template>
    </p-table>
  </section>
</section>
<p-confirmDialog />
<p-toast position="bottom-right" />
